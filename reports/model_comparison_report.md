# BucketsVision 모델 비교 검증 보고서

**작성일:** 2025-11-29
**분석 대상:** V1 (Ridge), V2 (XGBoost), V3 (Stacking Ensemble)
**테스트 데이터:** 25-26 시즌 271경기 (2025-10-21 ~ 2025-11-26)

---

## Executive Summary

### 핵심 결론

1. **세 모델 간 정확도 차이는 통계적으로 유의하지 않음**
   - McNemar Test: 모든 비교에서 p > 0.05
   - Bootstrap 95% CI: 모든 모델의 신뢰구간이 중첩

2. **V3 (Stacking)가 가장 높은 정확도(72.69%)를 보이나, 신뢰구간 고려 시 V1과 동등**

3. **V1 (Ridge)가 고신뢰 예측에서 가장 우수한 정확도를 보임**
   - 75%+ 신뢰도: V1 94.74% vs V3 83.13%
   - 단, V1의 고신뢰 커버리지는 7%로 매우 낮음

4. **확률 보정(Calibration) 품질은 V2, V3가 V1보다 우수**
   - ECE: V1 0.1050, V2 0.0772, V3 0.0766

---

## 1. 동일 조건 성능 비교

### 1.1 기본 메트릭

| Metric | V1 (Ridge) | V2 (XGBoost) | V3 (Stacking) | Best |
|--------|------------|--------------|---------------|------|
| **Accuracy** | 71.22% | 70.85% | **72.69%** | V3 |
| Precision | 72.29% | 71.35% | **74.07%** | V3 |
| Recall | 78.95% | **80.26%** | 78.95% | V2 |
| F1 Score | 75.47% | 75.54% | **76.43%** | V3 |
| **Brier Score** | 0.2069 | **0.1967** | 0.1972 | V2 |
| Log Loss | 0.6027 | 0.5800 | **0.5780** | V3 |
| **AUC-ROC** | 0.7628 | **0.7700** | 0.7605 | V2 |
| ECE | 0.1050 | 0.0772 | **0.0766** | V3 |
| MCE | **0.1728** | 0.2915 | 0.1836 | V1 |

### 1.2 주요 발견

- **정확도:** V3 > V1 > V2 순이나 차이는 ~2%p 이내
- **확률 품질 (Brier):** V2 ≈ V3 > V1 (낮을수록 좋음)
- **캘리브레이션 (ECE):** V3 ≈ V2 > V1 (V1이 가장 보정이 안됨)
- **순위 변별력 (AUC):** V2 > V1 > V3 (미세한 차이)

---

## 2. 통계적 유의성 검정

### 2.1 McNemar Test (예측 차이 유의성)

| Comparison | Chi-squared | p-value | Significant (α=0.05) |
|------------|-------------|---------|----------------------|
| V1 vs V2 | 0.0000 | 1.0000 | **No** |
| V1 vs V3 | 0.3214 | 0.5708 | **No** |
| V2 vs V3 | 0.5517 | 0.4576 | **No** |

**결론:** 세 모델 간 예측 차이는 통계적으로 유의하지 않음

### 2.2 Bootstrap Confidence Intervals (95%)

**Accuracy:**
| Model | Mean | 95% CI |
|-------|------|--------|
| V1 (Ridge) | 0.7121 | [0.6568, 0.7675] |
| V2 (XGBoost) | 0.7089 | [0.6494, 0.7638] |
| V3 (Stacking) | 0.7257 | [0.6753, 0.7786] |

**Brier Score:**
| Model | Mean | 95% CI |
|-------|------|--------|
| V1 (Ridge) | 0.2066 | [0.1942, 0.2210] |
| V2 (XGBoost) | 0.1969 | [0.1793, 0.2168] |
| V3 (Stacking) | 0.1972 | [0.1798, 0.2160] |

**결론:** 모든 모델의 95% 신뢰구간이 중첩되어 있어 실질적인 차이 없음

### 2.3 Paired Bootstrap Test (Accuracy Difference)

| Comparison | Mean Diff | 95% CI | p-value | Significant |
|------------|-----------|--------|---------|-------------|
| V1 - V3 | -0.0147 | [-0.0554, +0.0221] | 0.4840 | **No** |
| V2 - V3 | -0.0184 | [-0.0627, +0.0185] | 0.4040 | **No** |

**결론:** V3가 V1, V2보다 평균적으로 1.5-1.8%p 높지만, 95% CI에 0이 포함되어 유의하지 않음

---

## 3. 신뢰도별 성능 분석

### 3.1 신뢰도 임계값별 정확도와 커버리지

| Confidence | V1 Acc | V1 Cov | V2 Acc | V2 Cov | V3 Acc | V3 Cov |
|------------|--------|--------|--------|--------|--------|--------|
| 55%+ | 75.39% | 70.5% | 76.02% | 81.5% | 75.23% | 81.9% |
| 60%+ | 79.84% | 47.6% | 77.84% | 64.9% | 75.97% | 56.8% |
| 65%+ | 83.78% | 27.3% | 80.47% | 47.2% | 79.34% | 44.6% |
| 70%+ | 88.10% | 15.5% | 84.69% | 36.2% | 81.82% | 36.5% |
| **75%+** | **94.74%** | **7.0%** | 84.00% | 27.7% | 83.13% | 30.6% |

### 3.2 고신뢰 예측 분석

**V1 (Ridge)의 특징:**
- 75%+ 신뢰도에서 94.74% 정확도 (매우 높음)
- 하지만 커버리지가 7.0%로 극히 일부 경기만 해당
- 확률 분포가 좁음 (0.2-0.9 사이에 집중)

**V2, V3의 특징:**
- 더 넓은 확률 분포
- 커버리지 27-30%로 더 많은 경기에 대해 고신뢰 예측
- 정확도는 83-84%로 V1보다 낮음

**Trade-off:**
- **정확도 우선** → V1 사용 (단, 적용 경기 수 제한)
- **커버리지 우선** → V2, V3 사용

---

## 4. 캘리브레이션 분석

### 4.1 V1 (Ridge) 캘리브레이션

| Predicted | Actual | Count | Error |
|-----------|--------|-------|-------|
| 0.27 | 0.11 | 9 | 0.156 |
| 0.36 | 0.26 | 27 | 0.095 |
| 0.45 | 0.35 | 69 | 0.106 |
| 0.54 | 0.62 | 73 | 0.073 |
| 0.64 | 0.77 | 60 | 0.127 |
| 0.74 | 0.87 | 30 | 0.123 |
| 0.83 | 1.00 | 3 | 0.173 |

**특징:** 전반적으로 과소추정 경향 (예측값 < 실제값)

### 4.2 V3 (Stacking) 캘리브레이션

| Predicted | Actual | Count | Error |
|-----------|--------|-------|-------|
| 0.08 | 0.00 | 4 | 0.075 |
| 0.19 | 0.38 | 8 | 0.184 |
| 0.24 | 0.14 | 14 | 0.096 |
| 0.38 | 0.27 | 26 | 0.115 |
| 0.45 | 0.35 | 57 | 0.098 |
| 0.58 | 0.68 | 65 | 0.097 |
| **0.66** | **0.67** | **24** | **0.009** |
| **0.76** | **0.78** | **55** | **0.024** |
| 0.85 | 0.92 | 13 | 0.078 |
| 0.96 | 1.00 | 5 | 0.038 |

**특징:**
- 더 넓은 확률 분포 (0.08-0.96)
- 고확률 구간(0.66-0.76)에서 매우 우수한 보정 (error < 0.03)
- Isotonic Regression 캘리브레이션 효과

---

## 5. 피처 효과 vs 모델 효과 분석

### 5.1 실험 설계

| Exp | Features | Model | Purpose |
|-----|----------|-------|---------|
| A | V1 (16) | Logistic | Baseline |
| B | V3 (26) | Logistic | Feature Effect |

### 5.2 실험 결과 (수정)

| Exp | Features | Model | Accuracy | Notes |
|-----|----------|-------|----------|-------|
| A | V1 (16개 EPM) | Logistic | 70.11% | 베이스라인 |
| B | V3 (26개) | Logistic | **72.69%** | 피처 효과 |

### 5.3 핵심 발견

**V3 피처 효과:**
- V3 피처(26개) + 단순 Logistic = **72.69%**
- V1 피처(16개) + 단순 Logistic = 70.11%
- **피처 효과: +2.58%p**

**스태킹 앙상블 효과:**
- V3 피처 + Logistic = 72.69%
- V3 피처 + Stacking Ensemble = 72.69%
- **앙상블 효과: 0%p (추가 이득 없음)**

### 5.4 결론

> **V3 모델의 성능(72.69%)은 스태킹 앙상블 구조가 아닌, 추가된 피처(Four Factors, 모멘텀, 컨디션)에서 비롯됩니다.**

**피처 기여도 분석 (Logistic Regression 계수):**

| Feature | Coefficient | Category |
|---------|-------------|----------|
| team_epm_diff | +0.354 | EPM |
| team_depm_diff | +0.313 | EPM |
| team_oepm_diff | +0.304 | EPM |
| last5_win_pct_diff | -0.097 | 모멘텀 |
| b2b_diff | +0.081 | 컨디션 |

EPM 피처가 여전히 가장 중요하며, V3의 추가 피처(모멘텀, 컨디션)는 보조적 역할을 합니다.

---

## 6. 종합 결론

### 6.1 모델 선택 가이드

| Use Case | Recommended | Reason |
|----------|-------------|--------|
| **일반 예측** | V3 (Stacking) | 가장 높은 평균 정확도, 좋은 캘리브레이션 |
| **고신뢰 예측만** | V1 (Ridge) | 75%+ 신뢰도에서 94.74% 정확도 |
| **확률 품질 중요** | V2 (XGBoost) | 가장 낮은 Brier Score |
| **해석 가능성 중요** | V1 (Ridge) | 선형 모델, 계수 해석 가능 |
| **빠른 추론 필요** | V1 (Ridge) | 가장 간단한 구조 |

### 6.2 통계적 결론

1. **세 모델 간 정확도 차이(~2%p)는 통계적으로 유의하지 않음**
2. **샘플 크기(271경기)로는 이 정도의 차이를 검출하기 어려움**
3. **최소 1,000+ 경기의 테스트 데이터가 필요할 것으로 추정**

### 6.3 권장사항

1. **현재 상태에서는 어떤 모델을 선택해도 무방**
   - 성능 차이가 통계적으로 유의하지 않음

2. **장기적으로는 더 많은 데이터로 재검증 필요**
   - 25-26 시즌 전체 데이터 (~1,230경기) 확보 후 재평가

3. **실용적 선택:**
   - 운영 단순화 → V1 (Ridge)
   - 최고 성능 추구 → V3 (Stacking)
   - 밸런스 → V2 (XGBoost)

---

## Appendix: 분석 환경

- **테스트 데이터:** 271경기 (25-26 시즌)
- **통계 검정:** McNemar Test, Bootstrap (n=1,000)
- **유의수준:** α = 0.05
- **분석 코드:** `scripts/benchmark/`

---

*Generated by BucketsVision Benchmark Framework*
